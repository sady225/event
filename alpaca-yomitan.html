<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アルパカすく〜るガイド</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Core Lucide library for direct HTML use -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap');
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
        }
        .aspect-w-16 { position: relative; padding-bottom: 56.25%; }
        .aspect-h-9 { height: 0; }
        .aspect-w-16 > iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="root"><p style="padding: 1em;">コンポーネントを読み込んでいます...</p></div>
    <div id="error-container" style="color: red; background: #ffeeee; padding: 1em; display: none;"></div>

    <script type="text/babel">
        window.onload = () => {
            try {
                const { useState, useEffect, createElement } = React;

                const MuseumFloorGuide = () => {
                    const [currentFloor, setCurrentFloor] = useState("カーギー");
                    const [videoUrl, setVideoUrl] = useState(null);
                    const [selectedLearningContent, setSelectedLearningContent] = useState(null); // New state

                    const floorData = {
                        "カーギー": {
                            title: "カーギー",
                            floorDescription: "アルパカすく〜る唯一の女の子、カーギー。美意識が高くて、いつもおしゃれ。危ないことは絶対にしない、安全第一のしっかり者なんだ。みんなが突っ走しりすぎないように、優しく見守ってくれる、頼れるお姉さん的存在だよ。",
                            color: "bg-pink-100 border-pink-300",
                            headerColor: "bg-pink-200",
                            sections: [
                                { id: "K1", title: "読谷村の歴史を巡るバーチャルタイムトラベル：琉球王朝から現代へ", description: "読谷村の歴史的建造物や史跡を高精細な3DモデルやVR映像で巡り、琉球王朝時代から現代までの変遷を学びます。専門家によるオンライン講義や、当時の生活を再現したバーチャル体験を通じて、歴史の深さを安全に探求します。", location: "2D",
                                    learningContent: {
                                        title: "読谷村の歴史を巡るバーチャルタイムトラベル：琉球王朝から現代へ",
                                        text: "読谷村の歴史的建造物や史跡を、高精細な3DモデルやVR映像でバーチャルに巡ります。琉球王朝時代から現代までの読谷村の変遷を、オンライン講義や当時の生活を再現したバーチャル体験を通じて深く学びます。自宅にいながら、安全かつ没入感のある形で歴史の深さを探求し、過去と現在が交差する読谷村の魅力を発見できます。"
                                    }
                                },
                                { id: "K2", title: "読谷村の伝統文化体験：オンラインで楽しむ琉球舞踊と工芸の美", description: "読谷村に伝わる琉球舞踊のオンライン鑑賞会や、読谷焼、紅型などの伝統工芸の制作過程を動画で紹介。自宅でできる簡単な工芸体験キット（オプション）とオンラインワークショップで、沖縄の文化の美しさと奥深さを体験します。", location: "2E",
                                    learningContent: {
                                        title: "読谷村の伝統文化体験：オンラインで楽しむ琉球舞踊と工芸の美",
                                        text: "読谷村に伝わる琉球舞踊のオンライン鑑賞会に参加し、その優雅な動きと背景にある文化を学びます。読谷焼や紅型（びんがた）といった伝統工芸の制作過程を詳細な動画で紹介し、職人の技を間近で感じられます。自宅で手軽に楽しめる工芸体験キット（オプション）とオンラインワークショップを通じて、沖縄の文化の美しさ と奥深さを体験し、創造性を育むことができます。"
                                    }
                                },
                                { id: "K3", title: "読谷村の豊かな自然を巡るバーチャルヒーリングツアー：癒しの風景と生態系", description: "残波岬の雄大な自然、比謝川のマングローブ林、美しいビーチなど、読谷村の多様な自然を高画質映像でバーチャル探訪。専門家による生態系解説や、自然音のヒーリングBGMで、自宅にいながら心身を癒します。", location: "2F",
                                    learningContent: {
                                        title: "読谷村の豊かな自然を巡るバーチャルヒーリングツアー：癒しの風景と生態系",
                                        text: "読谷村の豊かな自然を、高画質映像でバーチャル探訪します。雄大な残波岬の景色、比謝川のマングローブ林、そして美しいビーチの水中世界を自宅から体験。専門家による生態系解説動画や、読谷村の自然音を収録したヒーリングBGMと共に、心身を癒し、沖縄の多様な生態系について深く学ぶことができます。安全な環境で、自然の美しさと癒しを存分に味わってください。"
                                    }
                                },
                                { id: "K4", title: "読谷村から学ぶ平和のメッセージ：オンライン証言と未来への対話", description: "チビチリガマやシムクガマなど、読谷村の戦跡をバーチャルで訪れ、沖縄戦の歴史と平和への願いを学びます。生存者のオンライン証言や、平和活動家との対話セッションを通じて、平和の尊さと未来への貢献について深く考えます。", location: "2G",
                                    learningContent: {
                                        title: "読谷村から学ぶ平和のメッセージ：オンライン証言と未来への対話",
                                        text: "読谷村にあるチビチリガマやシムクガマといった戦跡を、バーチャルツアーで訪れ、沖縄戦の歴史と平和への願いを学びます。生存者の方々のオンライン証言や、平和活動家との対話セッションを通じて、平和の尊さ、戦争の悲劇、そして未来への貢献について深く考える機会を提供します。自宅にいながら、歴史の教訓を胸に刻み、平和な社会を築くための行動について考察できます。"
                                    }
                                },
                                { id: "K5", title: "読谷村の食と暮らし：オンラインで繋がる地域の魅力", description: "読谷村の特産品（紅芋、もずくなど）を使った料理教室のオンライン動画や、地元の祭りやイベントのバーチャル参加。地域の食文化や人々の温かさに触れ、自宅から読谷村の魅力を多角的に体験します。", location: "2H",
                                    learningContent: {
                                        title: "読谷村の食と暮らし：オンラインで繋がる地域の魅力",
                                        text: "読谷村の豊かな食文化を、オンライン料理教室の動画で体験します。特産品の紅芋やもずくを使ったレシピを学び、自宅で沖縄料理に挑戦。また、読谷村の祭りやイベントのバーチャル参加を通じて、地域の活気や人々の温かさに触れることができます。自宅にいながら、読谷村の食と暮らしの魅力を多角的に体験し、地域との繋がりを感じられます。"
                                    }
                                }
                            ]
                        },
                        "サラバンジ": {
                            title: "サラバンジ",
                            floorDescription: "「なんとかなるさ！」が口癖のサラバンジ。無謀に見えることでも、持ち前の運と勢いで乗り越えちゃう不思議な力を持っている。体力はないから、難しいことはサクッと短期決戦で終わらせるのが得意。彼の周りではいつも奇跡が起こるんだ。",
                            color: "bg-green-100 border-green-300",
                            headerColor: "bg-green-200",
                            sections: [
                                { id: "S1", title: "読谷村史跡「バーチャル古道探検：奇跡の歴史ミステリー」", description: "読谷村に残る古い道や集落跡を、3DモデルやVR映像でバーチャル探検。短時間で歴史の謎を解き明かすクイズ形式のコンテンツや、専門家による「奇跡の物語」解説動画で、サラバンジのように直感的に歴史の面白さを体験します。", location: "3D",
                                    learningContent: {
                                        title: "読谷村史跡「バーチャル古道探検：奇跡の歴史ミステリー」",
                                        text: "読谷村に点在する古い道や集落跡を、高精細な3DモデルやVR映像でバーチャル探検します。体力に自信がない方でも、自宅から手軽に歴史の舞台を巡ることが可能です。短時間で歴史の謎を解き明かすクイズ形式のコンテンツや、専門家による「奇跡の物語」解説動画を通じて、サラバンジのように直感的に歴史の面白さを体験し、読谷村の知られざる歴史に触れることができます。"
                                    }
                                },
                                { id: "S2", title: "秘境ビーチ「オンライン絶景ツアー：幸運の瞬間をキャッチ！」", description: "読谷村の隠れた美しいビーチをドローン映像や水中カメラ映像でバーチャル体験。一瞬の絶景を捉えるフォトギャラリーや、幸運を呼ぶ海の生き物紹介動画で、サラバンジのように「なんとかなるさ！」の気持ちで美しい自然を楽しみます。", location: "3E",
                                    learningContent: {
                                        title: "秘境ビーチ「オンライン絶景ツアー：幸運の瞬間をキャッチ！」",
                                        text: "読谷村の隠れた美しいビーチを、ドローン映像や水中カメラ映像でバーチャル体験します。自宅にいながら、透明度の高い海や色とりどりのサンゴ礁、そしてそこに生息する海の生き物たちを鑑賞できます。一瞬の絶景を捉えたフォトギャラリーや、幸運を呼ぶ海の生き物紹介動画を通じて、サラバンジのように「なんとかなるさ！」の気持ちで美しい自然を楽しみ、癒しの時間を過ごすことができます。"
                                    }
                                },
                                { id: "S3", title: "琉球ガラス「オンライン工房見学：閃きのガラスアート」", description: "琉球ガラスの制作工程をオンライン動画で紹介。ガラス職人の技を間近で見て、サラバンジのように「閃き」を大切にしたデザインのヒントを得ます。バーチャルで色や形を組み合わせるシミュレーションも。", location: "3F",
                                    learningContent: {
                                        title: "琉球ガラス「オンライン工房見学：閃きのガラスアート」",
                                        text: "琉球ガラスの魅力と制作工程を、オンライン動画で詳しく紹介します。ガラス職人の繊細な手仕事や、熱いガラスが美しい作品へと変わる瞬間を間近で鑑賞。サラバンジのように「閃き」を大切にしたデザインのヒントを得られるコンテンツや、バーチャルで色や形を自由に組み合わせてオリジナルのガラスアートをシミュレーションする体験も提供します。"
                                    }
                                },
                                { id: "S4", title: "読谷補助飛行場跡地「平和の再生：バーチャルフィールドワーク」", description: "かつての読谷補助飛行場跡地を、オンライン映像で紹介。平和公園としての再生の歴史をドキュメンタリー形式で学び、サラバンジのように「なんとかなるさ！」の精神で未来への希望を見出します。", location: "3G",
                                    learningContent: {
                                        title: "読谷補助飛行場跡地「平和の再生：バーチャルフィールドワーク」",
                                        text: "かつて読谷補助飛行場として利用されていた広大な敷地が、どのように平和公園として再生され、自然が息づく場所へと変わっていったのかを、オンライン映像で紹介します。ドキュメンタリー形式でその歴史を学び、サラバンジのように「なんとかなるさ！」の精神で、荒廃から緑豊かな公園へと変わった「奇跡」の物語に触れることで、平和への意識を高め、未来への希望を見出すことができます。"
                                    }
                                },
                                { id: "S5", title: "読谷漁港「バーチャル海鮮市場：気まぐれレシピチャレンジ」", description: "読谷漁港の活気ある様子をオンライン映像で体験。その日の水揚げ情報や、新鮮な魚介を使った簡単レシピ動画を視聴。サラバンジのように「気まぐれ」で選んだ食材で、自宅で沖縄料理に挑戦します。", location: "3H",
                                    learningContent: {
                                        title: "読谷漁港「バーチャル海鮮市場：気まぐれレシピチャレンジ」",
                                        text: "読谷漁港の活気ある様子をオンライン映像で体験し、まるで市場にいるかのような臨場感を味わえます。その日の水揚げ情報や、新鮮な魚介を使った簡単レシピ動画を視聴し、自宅で手軽に沖縄料理に挑戦できます。サラバンジのように「気まぐれ」で選んだ食材が、予想外の豪華な海鮮丼や美味しい料理に変わる「奇跡」を期待しながら、食の楽しみを深めることができます。"
                                    }
                                }
                            ]
                        },
                        "ガンジュー": {
                            title: "ガンジュー",
                            floorDescription: "のんびり屋のガンジューは、食べることと寝ることが大好き。人見知りだけど、一度仲良くなると、とっても優しい心を持っているんだ。美味しいものがあると、どこからともなく現れる食いしん坊。彼の周りではいつも穏やかな空気が流れているよ。",
                            color: "bg-orange-100 border-orange-300",
                            headerColor: "bg-orange-200",
                            sections: [
                                { id: "G1", title: "読谷村の恵み「おうちで紅芋スイーツ作り＆バーチャルランチ」", description: "ガンジューの大好きな「食べること」に特化。読谷村特産の紅芋を使った簡単スイーツのオンラインレシピ動画。自宅でゆっくりと調理を楽しみ、完成したスイーツをバーチャルランチ会で他の参加者と共有。穏やかな雰囲気で食の喜びを分かち合います。", location: "4F",
                                    learningContent: {
                                        title: "読谷村の恵み「おうちで紅芋スイーツ作り＆バーチャルランチ」",
                                        text: "読谷村特産の紅芋を使った、簡単で美味しいスイーツのオンラインレシピ動画を提供します。自宅で自分のペースでゆっくりと調理を楽しみ、完成したスイーツをオンラインのバーチャルランチ会で他の参加者と共有することも可能です。ガンジューのように穏やかな雰囲気の中で、食の喜びを分かち合い、心もお腹も満たされる体験を提供します。"
                                    }
                                },
                                { id: "G2", title: "残波岬「バーチャル絶景ヒーリング：穏やかな波の音と共に」", description: "残波岬の美しい景色を長時間高画質映像で配信。波の音や鳥のさえずりなど、自然の音をBGMに、のんびりと景色を眺めるヒーリングコンテンツ。ガンジューのように穏やかな時間を過ごします。", location: "4I",
                                    learningContent: {
                                        title: "残波岬「バーチャル絶景ヒーリング：穏やかな波の音と共に」",
                                        text: "雄大な残波岬の美しい景色を、高画質映像で長時間配信します。波の音や鳥のさえずりなど、読谷村の自然の音をBGMに、自宅でゆったりと景色を眺めるヒーリングコンテンツです。ガンジューのようにのんびりとしたペースで、心身ともにリラックスできる穏やかな時間を過ごし、沖縄の自然の美しさに癒されることができます。"
                                    }
                                },
                                { id: "G3", title: "読谷焼の里「オンライン陶芸鑑賞会：心安らぐ器の美」", description: "読谷焼の歴史や特徴を解説するオンライン講座。職人の手仕事の映像や、美しい器のギャラリーを鑑賞。自宅でゆっくりと器の美しさに触れ、心安らぐ時間を過ごします。", location: "4C",
                                    learningContent: {
                                        title: "読谷焼の里「オンライン陶芸鑑賞会：心安らぐ器の美」",
                                        text: "読谷焼の歴史や特徴を解説するオンライン講座を提供します。読谷焼の職人の繊細な手仕事の映像や、完成した美しい器のオンラインギャラリーを鑑賞できます。人見知りなガンジューでも、自宅でゆっくりと器の美しさに触れ、その背景にある文化や歴史を学ぶことで、心安らぐ時間を過ごし、沖縄の伝統工芸の奥深さを感じることができます。"
                                    }
                                },
                                { id: "G4", title: "平和の道「静かに学ぶ沖縄戦：証言と映像でたどる平和」", description: "チビチリガマ・シムクガマの内部を360度映像でバーチャル体験。生存者の証言や歴史的資料をオンラインで閲覧し、静かに平和の尊さを学びます。", location: "4B",
                                    learningContent: {
                                        title: "平和の道「静かに学ぶ沖縄戦：証言と映像でたどる平和」",
                                        text: "沖縄戦の悲劇と平和への願いが込められたチビチリガマ・シムクガマの内部を、360度映像でバーチャル体験できます。混雑を避け、自宅で静かに生存者の証言や歴史的資料をオンラインで閲覧することで、沖縄戦の歴史に深く向き合い、平和の尊さを学びます。ガンジューの優しい心に響く、穏やかな雰囲気の中で、歴史から得られる教訓を深く考えることができます。"
                                    }
                                },
                                { id: "G5", title: "読谷の畑「バーチャル収穫体験＆おうちで沖縄野菜料理」", description: "読谷村の畑での野菜収穫の様子をオンライン動画で体験。収穫した野菜を使った沖縄料理のレシピ動画を視聴し、自宅でゆっくりと調理。自然の恵みを感じながら、食の楽しみを深めます。", location: "4A",
                                    learningContent: {
                                        title: "読谷の畑「バーチャル収穫体験＆おうちで沖縄野菜料理」",
                                        text: "読谷村の豊かな畑での野菜収穫の様子をオンライン動画で体験し、自然の恵みをバーチャルで感じられます。収穫した野菜を使った沖縄料理のレシピ動画を視聴し、自宅で手軽に沖縄料理に挑戦できます。ガンジューのようにのんびりとしたペースで、自然の恵みを感じながら、食の楽しみを深め、沖縄の食文化に触れることができます。"
                                    }
                                }
                            ]
                        },
                        "ハーリー": {
                            title: "ハーリー",
                            floorDescription: "オラオラ系のハーリーは、今日も一番目立つのが大好き！「みんな、俺についてこい！」と、いつも先頭を走っていく。怖いもの知らずで、どんな挑戦にも真っ先に飛び込むんだ。その情熱で、みんなを引っ張っていくリーダー的存在だよ。",
                            color: "bg-blue-100 border-blue-300",
                            headerColor: "bg-blue-200",
                            sections: [
                                { id: "H1", title: "読谷戦跡「平和への先導者トレッキング」 (オンライン版)", description: "かつての激戦地をVRや3Dモデルでバーチャルツアー。歴史の専門家による解説に加え、リーダーシップの観点から平和構築の重要性を学ぶオンラインワークショップ。ハーリーのように情熱を持って平和について考えます。", location: "5D",
                                    learningContent: {
                                        title: "読谷戦跡「平和への先導者トレッキング」 (オンライン版)",
                                        text: "読谷村のかつての激戦地を、VRや3Dモデルでバーチャルツアー体験。自宅にいながら歴史の重みを体感し、専門家による詳細な解説動画を視聴します。ハーリーのリーダーシップの特性を活かし、平和構築の重要性について議論するオンラインワークショップに参加。情熱を持って平和について深く考え、そのメッセージを周囲に発信する力を養います。"
                                    }
                                },
                                { id: "H2", title: "残波岬「オンライン絶景チャレンジ：最高の瞬間を共有せよ！」", description: "読谷村のシンボル、残波岬の絶景をオンラインで体験。視聴者参加型の「ベストショットコンテスト」や、ドローン映像でのバーチャル探検。ハーリーのように一番目立つ写真や動画を撮影し、オンラインで共有します。", location: "5E",
                                    learningContent: {
                                        title: "残波岬「オンライン絶景チャレンジ：最高の瞬間を共有せよ！」",
                                        text: "読谷村のシンボルである残波岬の雄大な絶景を、高画質映像やドローン映像でオンライン体験。ハーリーのように「一番目立つ」ことを目指し、視聴者参加型の「ベストショットコンテスト」で、バーチャル探検中に見つけた最高の瞬間をオンラインで共有します。怖いもの知らずの精神で、自宅からでもスリルと達成感を味わえるコンテンツです。"
                                    }
                                },
                                { id: "H3", title: "琉球太鼓「オンラインエイサーマスタークラス：魂の響きを世界へ」", description: "琉球太鼓のオンラインレッスン。ハーリーのように情熱的に太鼓の打ち方を学び、オンライン発表会でその成果を披露。世界に向けて沖縄の文化を発信します。", location: "5G",
                                    learningContent: {
                                        title: "琉球太鼓「オンラインエイサーマスタークラス：魂の響きを世界へ」",
                                        text: "沖縄の伝統芸能であるエイサーの琉球太鼓を、オンラインで本格的に学びます。ハーリーのように情熱的に太鼓の打ち方を習得し、オンライン発表会でその成果を世界に向けて披露する機会も提供。自宅にいながら沖縄の文化を深く体験し、その魅力を世界に発信するリーダーとしての役割を担うことができます。<a href=\"./taiko_game.html\" target=\"_blank\" style=\"color: blue; text-decoration: underline;\">太鼓叩きゲームで遊ぶ！</a>"
                                    }
                                },
                                { id: "H4", title: "読谷村「オンライン平和サミット：未来を語るリーダーたち」", description: "読谷村の平和への取り組みについて、オンラインで専門家や活動家が議論するサミット。ハーリーのように積極的に意見を述べ、平和な未来を築くためのアイデアを提案します。", location: "5I",
                                    learningContent: {
                                        title: "読谷村「オンライン平和サミット：未来を語るリーダーたち」",
                                        text: "読谷村の平和への取り組みや、世界が直面する平和に関する課題について、オンラインで専門家や活動家が議論するサミットに参加します。ハーリーのように積極的に意見を述べ、平和な未来を築くためのアイデアを提案。自宅からでも、情熱を持って社会貢献に参加し、リーダーシップを発揮する機会を提供します。"
                                    }
                                },
                                { id: "H5", title: "読谷の自然「バーチャルケイビング探検：未知へのオンライン冒険」", description: "読谷村に点在する自然洞窟（ケイブ）を360度VR映像でバーチャル探検。ハーリーのように「怖いもの知らず」の精神で、オンラインで未知の空間を探索し、自然の神秘を体験します。", location: "5H",
                                    learningContent: {
                                        title: "読谷の自然「バーチャルケイビング探検：未知へのオンライン冒険」",
                                        text: "読谷村に点在する自然洞窟（ケイブ）の内部を、360度VR映像でバーチャル探検します。ハーリーのように「怖いもの知らず」の精神で、自宅からでも未知の空間を探索し、自然の神秘と挑戦の達成感を味わえます。オンラインで仲間と協力しながら、バーチャルな冒険を通じて、自然への理解を深め、新たな発見の喜びを体験できます。"
                                    }
                                }
                            ]
                        }
                    };

                    const floors = ["カーギー","サラバンジ","ガンジュー","ハーリー"];
                    const currentFloorData = floorData[currentFloor];

                    const nextFloor = () => { const currentIndex = floors.indexOf(currentFloor); if (currentIndex < floors.length - 1) { setCurrentFloor(floors[currentIndex + 1]); } };
                    const prevFloor = () => { const currentIndex = floors.indexOf(currentFloor); if (currentIndex > 0) { setCurrentFloor(floors[currentIndex - 1]); } };

                    useEffect(() => {
                        lucide.createIcons();
                    }, [currentFloor, videoUrl, selectedLearningContent]);

                    return (
                        <div className="min-h-screen bg-gray-50">
                            <div className={`${currentFloorData.headerColor} p-4 shadow-md sticky top-0 z-10`}>
                                <div className="max-w-4xl mx-auto">
                                    <h1 className="text-3xl font-extrabold text-gray-800 mb-2">🦙 アルパカすく〜る	ー読谷編ー</h1>
                                    <div className="flex items-center justify-between">
                                        <h2 className="text-2xl font-bold text-gray-700">{currentFloorData.title}</h2>
                                        <div className="flex gap-2">{floors.map(floor => (<button key={floor} onClick={() => setCurrentFloor(floor)} className={`px-4 py-2 rounded-lg font-bold transition-all duration-300 ${ currentFloor === floor ? 'bg-white text-gray-800 shadow-lg scale-105' : 'bg-white/50 text-gray-600 hover:bg-white/80' }`}>{floor}</button>))}</div>
                                    </div>
                                    {currentFloorData.floorDescription && (
                                        <p className="text-gray-600 text-sm mt-2 leading-relaxed">
                                            {currentFloorData.floorDescription}
                                        </p>
                                    )}
                                </div>
                            </div>
                            <div className="max-w-4xl mx-auto p-4">
                                <div className="flex justify-between items-center my-6">
                                    <button onClick={prevFloor}  disabled={currentFloor === floors[0]} className={`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-all ${currentFloor === floors[0] ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-white text-gray-700 hover:bg-gray-100 shadow-md hover:shadow-lg'}`}>
                                        <i data-lucide="chevron-left" className="w-5 h-5"></i>
                                        前のアルパカ
                                    </button>
                                    <div className="text-center"><div className="text-sm text-gray-600">現在のアルパカ</div><div className="text-3xl font-extrabold text-gray-800">{currentFloor}</div></div>
                                    <button onClick={nextFloor} disabled={currentFloor === floors[floors.length - 1]} className={`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-all ${currentFloor === floors[floors.length - 1] ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-white text-gray-700 hover:bg-gray-100 shadow-md hover:shadow-lg'}`}>
                                        次のアルパカ
                                        <i data-lucide="chevron-right" className="w-5 h-5"></i>
                                    </button>
                                </div>
                                <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                                    {currentFloorData.sections.map((section) => (
                                        <div key={section.id} className={`${currentFloorData.color} rounded-xl p-6 border-2 shadow-lg hover:shadow-2xl hover:-translate-y-1 transition-all duration-300`}>
                                            <div className="flex items-start justify-between mb-3">
                                                <div className="flex items-center gap-2">
                                                    <div className="bg-white px-3 py-1 rounded-full text-sm font-bold text-gray-700">{section.location}</div>
                                                    {section.isNew && <div className="bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse">NEW</div>}
                                                    {section.isForest && <div className="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold">FOREST</div>}
                                                </div>
                                                <i data-lucide="map-pin" className="w-5 h-5 text-gray-600"></i>
                                            </div>
                                            <h3 className="text-xl font-bold text-gray-800 mb-3">{section.title}</h3>
                                            <p className="text-gray-700 text-sm leading-relaxed mb-4 h-24">{section.description}</p>
                                            <div className="flex justify-between items-center">
                                                {section.price && <div className="flex items-center gap-2 text-green-700 font-bold"><i data-lucide="dollar-sign" className="w-4 h-4"></i> {section.price}</div>}
                                                {section.videoId && <button onClick={() => setVideoUrl(`https://www.youtube.com/embed/${section.videoId}?autoplay=1`)} className="bg-red-500 text-white px-3 py-2 rounded-lg text-sm font-bold hover:bg-red-600 transition-colors flex items-center gap-1 shadow-md hover:shadow-lg"><i data-lucide="video" className="w-4 h-4"></i> 動画を見る</button>}
                                                {section.learningContent && <button onClick={() => setSelectedLearningContent(section.learningContent)} className="bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-bold hover:bg-blue-600 transition-colors flex items-center gap-1 shadow-md hover:shadow-lg"><i data-lucide="book-open" className="w-4 h-4"></i> 学ぶ</button>}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-8 bg-white rounded-xl p-6 shadow-lg">
                                    <h3 className="text-lg font-bold text-gray-800 mb-3">{currentFloor} フロア情報</h3>
                                    <div className="grid md:grid-cols-2 gap-4 text-sm text-gray-600">
                                        <div><strong>展示エリア数:</strong> {currentFloorData.sections.length}箇所</div>
                                        <div><strong>推奨見学時間:</strong> {currentFloor === "カーギー" && " 45-60分"}{currentFloor === "サラバンジ" && " 60-90分"}{currentFloor === "ガンジュー" && " 30-45分"}{currentFloor === "ハーリー" && " 90-120分"}</div>
                                    </div>
                                </div>
                            </div>
                            <footer className="bg-gray-800 text-white p-6 mt-12">
                                <div className="max-w-4xl mx-auto text-center text-sm"><p>各階には階段・エレベーター・エスカレーターをご利用いただけます。<br />車椅子での見学も可能です。詳しくは係員にお尋ねください。</p></div>
                            </footer>

                            {videoUrl && (
                                <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 transition-opacity duration-300" onClick={() => setVideoUrl(null)}>
                                    <div className="bg-white p-2 rounded-xl shadow-2xl max-w-4xl w-11/12 transform transition-transform duration-300 scale-95" onClick={(e) => e.stopPropagation()}>
                                        <div className="aspect-w-16 aspect-h-9">
                                            <iframe 
                                                src={videoUrl}
                                                title="YouTube video player"
                                                frameBorder="0" 
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                                allowFullScreen
                                                className="rounded-lg">
                                            </iframe>
                                        </div>
                                        <button onClick={() => setVideoUrl(null)} className="mt-4 w-full bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 font-bold transition-colors">閉じる</button>
                                    </div>
                                </div>
                            )}

                            {selectedLearningContent && (
                                <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 transition-opacity duration-300" onClick={() => setSelectedLearningContent(null)}>
                                    <div className="bg-white p-6 rounded-xl shadow-2xl max-w-2xl w-11/12 transform transition-transform duration-300 scale-95" onClick={(e) => e.stopPropagation()}>
                                        <h3 className="text-2xl font-bold text-gray-800 mb-4">{selectedLearningContent.title}</h3>
                                        <p className="text-gray-700 whitespace-pre-wrap leading-relaxed mb-6">{selectedLearningContent.text}</p>
                                        <button onClick={() => setSelectedLearningContent(null)} className="mt-4 w-full bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 font-bold transition-colors">閉じる</button>
                                    </div>
                                </div>
                            )}
                        </div>
                    );
                };

                const container = document.getElementById('root');
                const root = ReactDOM.createRoot(container);
                root.render(createElement(MuseumFloorGuide));

            } catch (error) {
                const errorContainer = document.getElementById('error-container');
                errorContainer.textContent = "エラー: " + error.message;
                errorContainer.style.display = 'block';
                console.error(error);
            }
        };
    </script>
</body>
</html>